<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title th:text="${title}"></title>
    <link rel="icon" th:href="@{/img/favicon.ico}" type="image/x-icon">
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}">
    <script th:src="@{/js/jquery-3.6.0.min.js}"></script>
    <script th:src="@{/js/popper.min.js}"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" type="text/css" th:href="@{/css/fa-all-5.15.2.css}">
    <script th:src="@{/js/fa-all-5.15.2.js}"></script>
    <script th:src="@{/js/sweetalert.min.js}" defer></script>
    <link rel="stylesheet" type="text/css" th:href="@{/css/swiper-bundle.min.css}">
    <script th:src="@{/js/swiper-bundle.min.js}"></script>
</head>

<body th:with="user=${#ctx.session.USER_LOGGED}">
    <div class="offcanvas offcanvas-start bg-black text-light" style="width: 100vw;" tabindex="-1" id="sidebarOffcanvas"
        aria-labelledby="offcanvasWithBackdropLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasWithBackdropLabel">
                Offcanvas with backdrop
            </h5>
            <button type="button" class="btn-close text-reset text-light" data-bs-dismiss="offcanvas"
                aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="#">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
                </li>
            </ul>
            <form class="d-flex">
                <input class="form-control bg-white me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
        </div>
    </div>
    <nav id="navbar" class="navbar navbar-expand-sm" style="height: 50px">
        <div class="container my-0 p-0 justify-content-between align-items-center">
            <a class="navbar-brand" href="/">
                <img class="lozad" loading="lazy" th:src="@{'/img/logo.png'}" style="height: 28px;">
            </a>
            <div class="box-search d-none d-md-flex">
                <form th:action="@{/search}" method="get" class="d-flex">
                    <input class="form-control" type="text" th:name="name" autocomplete="off" placeholder="Tìm truyện">
                    <button class="btn" type="submit">
                        <i class="fas fa-search"></i>
                    </button>
                </form>
            </div>

            <button id="btn-open-sidebar" class="btn d-md-none" type="button" data-bs-toggle="offcanvas"
                data-bs-target="#sidebarOffcanvas" aria-controls="sidebarOffcanvas"><i
                    class="fas fa-bars fa-2x"></i></button>

            <div class="dropdown box-login d-none d-md-flex justify-content-end" th:if="${user!=null}">
                <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown"
                    aria-expanded="false">
                    <span class="text-white" th:text="${user.username}"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <!-- Link to profile -->
                    <li><a class="dropdown-item" href="/profile">Trang cá nhân</a></li>
                    <!-- Link to saved stories -->
                    <li><a class="dropdown-item" href="/saved-stories">Truyện đã lưu</a></li>
                    <!-- Link to logout -->
                    <li><a class="dropdown-item" href="/logout">Đăng xuất</a></li>
                </ul>
            </div>
            <div th:unless="${user!=null}">
                <div class="box-login d-flex justify-content-end">
                    <a href="/login" class="btn border-0 shadow-0 text-white">Đăng nhập</a>/
                    <a href="/register" class="btn border-0 shadow-0 text-white">Đăng ký</a>
                </div>
            </div>
        </div>
    </nav>
    <nav id="nav-bot" class="d-none d-md-flex">
        <ul class="container my-0 p-0 d-flex items-center justify-start">
            <a href="/" class="nav-item btn active">
                <i class="fas fa-home"></i>
            </a>
            <a href="/" class="nav-item btn">
                hot
            </a>
            <div class="nav-item group">
                <a href="/" class="btn">
                    thể loại
                </a>
                <div class="group-menu shadow">
                    <a th:each="tag : ${global.get('tags')}" href="#" class="group-item py-2 btn w-100"
                        th:text="${tag.name}"></a>
                </div>
            </div>
        </ul>
    </nav>

    <div class="container py-3 px-0 py-md-4" id="wrap-content">
        <div th:replace="~{${content}}"></div>
    </div>

    <footer class="bg-dark w-100">
        <div class="container p-0">
            <div class="row m-0 p-0 py-4">
                <div class="col-12 col-lg-4 m-0 p-0 d-flex flex-wrap gap-4">
                    <div class="w-100 m-0 p-0">
                        <a class="logo btn border-0 shadow-0 m-0 mb-2 p-0 px-2" href="/">
                            <img class="lozad" loading="lazy" th:src="@{'/img/logo.png'}" style="height: 32px;">
                        </a>
                        <br>
                        <a href="#" class="btn text-light m-0 p-0 px-2 border-0 shadow-0">
                            Giới thiệu
                        </a>|
                        <a href="#" class="btn text-light m-0 p-0 px-2 border-0 shadow-0">
                            Liên hệ
                        </a><br>
                        <a href="#" class="btn text-light m-0 p-0 px-2 border-0 shadow-0">
                            Điều khoản
                        </a>|
                        <a href="#" class="btn text-light m-0 p-0 px-2 border-0 shadow-0">
                            Chính sách bảo mật
                        </a>
                    </div>
                    <div class="w-100 d-flex flex-wrap text-light px-2">
                        <h1 class="mb-2 text-light fw-bold text-uppercase">Liên hệ</h1>
                        <table class="m-0 p-0 w-100">
                            <tr>
                                <td>Telegram:</td>
                                <td>@netsteal</td>
                            </tr>
                            <tr>
                                <td>Email:</td>
                                <td>netsteal@gmail.com</td>
                            </tr>
                            <tr class="mt-3">
                                <td colspan="2"></td>
                            </tr>
                        </table>
                        <h6 class="my-4 text-light">Copyright © 2024 NetSteal</h5>
                    </div>
                </div>
                <div class="col-12 col-lg-8 m-0 p-0">
                    <h5 class="text-uppercase text-light">từ khóa</h5>
                    <div class="w-100 m-0 p-0 d-flex flex-wrap">
                        <a href="#" class="btn m-1 border-light text-light" th:each="tag : ${global.get('tags')}"
                            th:text="${tag.name}"></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <button type="button" id="back-to-top" class="btn">
        <i class="fas fa-chevron-up"></i>
    </button>
    <!-- <script th:src="@{/js/lozad.min.js}" defer></script> -->
    <script defer>
        $(document).ready(function () {
            $("#back-to-top").click(() => {
                $("html").scrollTop(0);
            })

            // const observer = lozad('.my-class');
            // observer.observe();

            
            // $('.lozad').each(function(index) {
            //     $(this).on('load', function() {
            //         $('.status').eq(index).text('Image ' + (index + 1) + ' loaded successfully.');
            //     }).on('error', function() {
            //         $('.status').eq(index).text('Error loading image ' + (index + 1) + '.').addClass('error');
            //     });
            //     $(this).attr('src', $(this).data('src'));
            // });
        });
    </script>
</body>

</html>